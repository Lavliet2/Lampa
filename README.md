# Плагины для Lampa

Этот репозиторий содержит примеры плагинов для приложения Lampa и документацию по их разработке.

## Что такое Lampa?

Lampa - это популярное приложение для просмотра кино и сериалов, которое поддерживает плагины для расширения функциональности. Плагины пишутся на JavaScript и интегрируются в интерфейс приложения.

## Структура проекта

```
D:\C#\Lampa\
├── plugin-template.js          # Базовый шаблон плагина
├── notes-plugin.js            # Плагин заметок к фильмам
├── export-plugin.js           # Плагин экспорта данных
├── lampa-api-documentation.md # API документация
├── plugin-development-guide.md # Руководство по разработке
└── README.md                  # Этот файл
```

## Примеры плагинов

### 1. Базовый шаблон (plugin-template.js)
Содержит основную структуру плагина с примерами использования основных API методов Lampa.

### 2. Плагин заметок (notes-plugin.js)
Позволяет добавлять заметки к фильмам и сериалам:
- Добавление кнопки "Заметки" в интерфейс
- Редактирование заметок
- Сохранение заметок в локальном хранилище
- Настройки плагина

### 3. Плагин экспорта (export-plugin.js)
Позволяет экспортировать список просмотренных фильмов:
- Экспорт в JSON, CSV, TXT форматах
- Статистика просмотров
- Скачивание файлов

## Как использовать

### Установка плагина
1. Скопируйте код плагина из файла `.js`
2. Откройте Lampa
3. Перейдите в настройки
4. Найдите раздел "Плагины" или "Парсеры"
5. Вставьте код плагина
6. Сохраните настройки

### Разработка собственного плагина
1. Изучите `plugin-template.js` для понимания структуры
2. Прочитайте `lampa-api-documentation.md` для изучения API
3. Следуйте руководству в `plugin-development-guide.md`
4. Протестируйте плагин локально
5. Опубликуйте на GitHub

## API методы Lampa

### Основные компоненты
- **Lampa.Listener** - подписка на события
- **Lampa.Activity** - навигация между экранами
- **Lampa.Storage** - работа с настройками
- **Lampa.SettingsApi** - добавление параметров в настройки
- **Lampa.Select** - диалоги выбора
- **Lampa.Lang** - локализация
- **Lampa.Controller** - управление интерфейсом

### Пример использования
```javascript
// Подписка на события
Lampa.Listener.follow('full', function (e) {
    if (e.type == 'complite') {
        // Обработка события
    }
});

// Работа с настройками
Lampa.Storage.set('setting_name', 'value');
var value = Lampa.Storage.get('setting_name', 'default');

// Показ диалога
Lampa.Select.show({
    title: 'Заголовок',
    items: [
        { title: 'Опция 1', value: 'option1' }
    ],
    onSelect: function (item) {
        // Обработка выбора
    }
});
```

## Лучшие практики

### 1. Структура плагина
```javascript
(function () {
    'use strict';
    
    function startPlugin() {
        window.plugin_[ИМЯ]_ready = true;
        
        function add() {
            // Основная логика
        }
        
        // Инициализация
        if (window.appready) add(); 
        else {
            Lampa.Listener.follow('app', function (e) {
                if (e.type == 'ready') { add(); }
            });
        }
    }
    
    if (!window.plugin_[ИМЯ]_ready) startPlugin();
})();
```

### 2. Обработка ошибок
```javascript
try {
    // Код плагина
} catch (error) {
    console.error('Ошибка в плагине:', error);
}
```

### 3. Производительность
- Минимизируйте DOM операции
- Используйте кэширование
- Избегайте блокирующих операций

## Отладка

### Консольные сообщения
```javascript
console.log('Отладочная информация');
console.error('Ошибка:', error);
```

### Проверка состояния
```javascript
console.log('Состояние плагина:', window.plugin_[ИМЯ]_ready);
```

## Публикация

### Подготовка к публикации
1. Убедитесь, что плагин работает стабильно
2. Добавьте комментарии к коду
3. Создайте README с описанием
4. Протестируйте на разных версиях Lampa

### Размещение на GitHub
1. Создайте репозиторий
2. Добавьте файл плагина
3. Создайте README.md
4. Добавьте лицензию
5. Создайте релиз

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл LICENSE для подробностей.

## Вклад в проект

Мы приветствуем вклад в развитие проекта! Пожалуйста:

1. Форкните репозиторий
2. Создайте ветку для новой функции
3. Внесите изменения
4. Создайте Pull Request

## Поддержка

Если у вас есть вопросы или проблемы:

1. Создайте Issue в репозитории
2. Опишите проблему подробно
3. Приложите логи ошибок
4. Укажите версию Lampa

## Ссылки

- [Официальный сайт Lampa](http://lampa.mx/)
- [GitHub репозиторий](https://github.com/your-username/lampa-plugins)
- [Документация API](lampa-api-documentation.md)
- [Руководство по разработке](plugin-development-guide.md)
